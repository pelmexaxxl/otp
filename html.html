<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Quality</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Main Application Container -->
    <div id="app">

        <!-- Loading State -->
        <div id="loadingState" class="loading-state hidden">
            <div class="spinner-border text-primary" role="status">
                <span class="sr-only">Загрузка...</span>
            </div>
        </div>

        <!-- Error State -->
        <div id="errorState" class="error-state hidden"></div>

        <!-- Action Panel -->
        <div class="action-panel-wrapper">
            <div id="actionButtons" class="action-panel hidden">
                <div class="action-panel-header">
                    <div>
                        <strong>Выбрано: <span id="selectedCount" class="selected-count">0</span></strong>
                    </div>

                    <div id="statusActions">
                        <div id="sameStatusBlock">
                            <!-- Status: New (10) -->
                            <div id="statusNew" class="status-block">
                                <button class="btn btn-primary" data-action="status-new">
                                    Взять в анализ
                                </button>
                            </div>

                            <!-- Status: In Analysis -->
                            <div id="statusInAnalysis" class="status-block">
                                <button class="btn btn-warning" data-action="to-exception">В исключения</button>
                                <button class="btn btn-primary" data-action="reassign">Переназначить</button>
                                <button class="btn btn-danger" data-action="analysis-to-work">В работу</button>
                            </div>

                            <!-- Status: In Work -->
                            <div id="statusInWork" class="status-block ">
                                <button class="btn btn-warning" data-action="to-exception">В исключения</button>
                                <button class="btn btn-success" data-action="close">Закрыть инцидент</button>
                                <button class="btn btn-danger" data-action="work-to-wait">В ожидание</button>
                                <button class="btn btn-primary" data-action="reassign">Переназначить</button>
                            </div>

                            <!-- Status: Reassigned -->
                            <div id="statusReassigned" class="status-block ">
                                <button class="btn btn-warning" data-action="to-exception">В исключения</button>
                                <button class="btn btn-danger" data-action="reassigned-to-work">В работу</button>
                            </div>

                            <!-- Status: Waiting -->
                            <div id="statusWaiting" class="status-block ">
                                <button class="btn btn-warning" data-action="to-exception">В исключения</button>
                                <button class="btn btn-danger" data-action="wait-to-work">В работу</button>
                                <button class="btn btn-success" data-action="close">Закрыть инцидент</button>
                            </div>

                            <!-- Different Statuses -->
                            <div id="differentStatus" class="status-warning ">
                                Выбраны инциденты с разными статусами
                            </div>
                        </div>
                    </div>

                    <button class="btn" id="btnClearSelection">Очистить выбор</button>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="table-container">
            <table id="errorsTable" class="table">
                <thead>
                    <tr>
                        <th class="checkbox-cell">
                            <input type="checkbox" id="selectAll" class="select-checkbox">
                        </th>
                        <th class="sortable" data-col="1">Идентификатор ошибочной записи</th>
                        <th class="sortable" data-col="2">Ответственный</th>
                        <th class="sortable" data-col="3">Исключение</th>
                        <th class="sortable" data-col="4">Статус</th>
                        <!-- <th class="sortable" data-col="5">Таблица</th>
                        <th class="sortable" data-col="6">Атрибут таблицы</th> -->
                        <th class="sortable" data-col="7">Комментарий</th>
                        <th></th>
                    </tr>
                    <tr class="filter-row">
                        <th class="checkbox-cell"></th>
                        <th data-col="1"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <th data-col="2"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <th data-col="3"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <th data-col="4"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <!-- <th data-col="5"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <th data-col="6"><input type="text" class="col-filter" placeholder="Фильтр..."></th> -->
                        <th data-col="7"><input type="text" class="col-filter" placeholder="Фильтр..."></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Edit Modal -->
        <div id="editModal" class="custom-modal-overlay">
            <div class="custom-modal">
                <div class="custom-modal-header">
                    <h3>Редактирование инцидентов</h3>
                    <button class="modal-close" id="modalClose">&times;</button>
                </div>
                <div class="custom-modal-body">
                    <div class="form-group">
                        <label>Выбрано инцидентов: <span id="selectedCountModal">0</span></label>
                    </div>

                    <div class="form-group">
                        <label for="tableName">Таблица БД:</label>
                        <select id="tableName" class="form-control">
                            <option value="">-- Выберите таблицу --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="tableAttribute">Атрибут таблицы БД:</label>
                        <select id="tableAttribute" class="form-control" disabled>
                            <option value="">-- Сначала выберите таблицу --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="exceptionSelect">Исключение:</label>
                        <select id="exceptionSelect" class="form-control">
                            <option value="">-- Выберите исключение --</option>
                            <option value="true">Да</option>
                            <option value="false">Нет</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="statusSelect">Статус:</label>
                        <select id="statusSelect" class="form-control">
                            <option value="">-- Выберите статус --</option>
                            <option value="10">Новый</option>
                            <option value="В анализе">В анализе</option>
                            <option value="В работе">В работе</option>
                            <option value="Переназначен">Переназначен</option>
                            <option value="В ожидании">В ожидании</option>
                            <option value="Ожидание">Ожидание</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ownerInput">Ответственный:</label>
                        <div class="autocomplete-container">
                            <input type="text" id="ownerInput" class="form-control"
                                placeholder="Начните вводить имя...">
                            <div id="suggestionsList" class="suggestions-list"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="commentInput">Комментарий:</label>
                        <textarea id="commentInput" class="form-control" rows="3"
                            placeholder="Введите комментарий..."></textarea>
                    </div>
                </div>
                <div class="custom-modal-footer">
                    <button class="btn btn-cancel" id="btnCancel">Отмена</button>
                    <button class="btn btn-primary" id="btnSave">Сохранить изменения</button>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div id="paginationContainer" class="pagination-container"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Application -->
    <script src="js/app.js"></script>
</body>

</html>